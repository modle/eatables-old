{% load staticfiles %}
{% load menu_extras %}

<link rel="stylesheet" type="text/css" media="only screen" href="{% static 'menu/style.css' %}" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<div id="title">
    Edit: {{ recipe.name }}
</div>
<div id="content">
    <nav>
        <a class="button" id="nav" href="{% url 'menu:index' %}">Back to Recipe List</a>
        <a class="button" id="nav" href="{% url 'menu:recipedetails' recipe.id %}">View Recipe Details</a>
        <a class="button" id="delete" href="{% url 'menu:disablerecipe' recipe.id %}">Remove Recipe</a>
    </nav><div style="clear:both"></div>
    <hr noshade><hr noshade>

    <h2>Edit Recipe Details</h2>
    <input type=submit value="Update Recipe Details" id="submit"/>
    <a class="button" href="{% url 'menu:recipedetails' recipe.id %}">Cancel</a>
    <hr noshade>

    <form action="{% url 'menu:updaterecipe' recipe.id %}" method="post">
    {% csrf_token %}
        Name<br><input type=text name="name" value="{{ recipe.name }}" id="text"><br><br>
        Prep Method<br><input type=text name="method" value="{{ recipe.prepMethod }}" id="text"><br><br>
        Temperature<br><input type=text name="temp" value="{{ recipe.temperature }}" id="text"><br><br>
        Prep Time (minutes)<br><input type=text name="prep" value="{{ recipe.prepTime }}" id="text"><br><br>
        Cook Time (minutes)<br><input type=text name="cook" value="{{ recipe.cookTime }}" id="text"><br><br>
        Servings<br><input type=text name="serves" value="{{ recipe.servings }}" id="text"><br><br>
        Directions (HTML)<br><textarea name="directions" ROWS=15 COLS=35>{{ recipe.directions }}</textarea><br><br>
        <input type=submit value="Update Recipe Details" id="submit"/>
        <a class="button" href="{% url 'menu:recipedetails' recipe.id %}">Cancel</a>
    </form>
    <hr noshade><hr noshade>

    <h2>Edit Ingredients</h2>
    <input type=submit value="Update Ingredients" id="submit">
    <a class="button" href="{% url 'menu:recipedetails' recipe.id %}">Cancel</a>
    <hr noshade>

    <form action="{% url 'menu:updateingredient' recipe.id %}" method="post">
    {% csrf_token %}
        <h4>Current Ingredients</h4>
            {% for i in recipe.ingredient_set.all %}
                <ul>
                    <li id="nospace">{{ i.name }}, {{ i.amount }}, {{ i.unit }}</li>
                </ul>
            {% endfor %}
        <p><a class="button" href="{% url 'menu:addingredient' recipe.id %}" method="post">Add new ingredient</a></p>
        <div id="ingredients"></div>
        {% for i in recipe.ingredient_set.all %}
            <fieldset name = "{{i.id}},ingredients">
                <legend><a class="button" id="delete" href="{% url 'menu:deleteingredient' i.id %}" method="post">Delete this ingredient</a></legend>
                <input type=text placeholder="name" name="{{i.id}},name" value="{{ i.name }}">
                <input type=text placeholder="amount" name="{{i.id}},amount" value="{{ i.amount }}">
                <input type=text placeholder="units" name="{{i.id}},unit" value="{{ i.unit }}">
                <input type=text placeholder="comment" name="{{i.id}},comment" value="{{ i.comment }}">
            </fieldset>
        {% endfor %}
        <br>
        <input type=submit value="Update Ingredients" id="submit">
        <a class="button" href="{% url 'menu:recipedetails' recipe.id %}">Cancel</a>
        <hr noshade><hr noshade>
        <a class="button" id="deleteforever" href="{% url 'menu:deleterecipeforever' recipe.id %}">DELETE RECIPE FOREVER</a>
    </form>
</div>
